#!/bin/bash

echo "ðŸ¦– Instalacja Panelu Pterodactyl - Production Edition"

# SprawdÅº czy jest root
if [ "$EUID" -ne 0 ]; then
    echo "âŒ Uruchom jako root: sudo ./install-panel.sh"
    exit 1
fi

# Aktualizacja systemu
echo "ðŸ“¦ Aktualizowanie systemu..."
apt update && apt upgrade -y

# Instalacja zaleÅ¼noÅ›ci
echo "ðŸ”§ Instalowanie zaleÅ¼noÅ›ci..."
apt install -y netcat-openbsd jq wget curl python3 default-jre screen tmux

# UtwÃ³rz katalog panelu
mkdir -p /var/www/panel
cp panel.sh /var/www/panel/
chmod +x /var/www/panel/panel.sh

# UtwÃ³rz symbolic link
ln -sf /var/www/panel/panel.sh /usr/local/bin/pterodactyl-panel

# UtwÃ³rz service systemd
cat > /etc/systemd/system/pterodactyl-panel.service << SERVICE_EOF
[Unit]
Description=Pterodactyl-like Panel
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/panel
ExecStart=/var/www/panel/panel.sh
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
SERVICE_EOF

systemctl daemon-reload

echo ""
echo "âœ… Instalacja zakoÅ„czona!"
echo "ðŸŽ¯ UÅ¼yj: sudo pterodactyl-panel"
echo "ðŸŒ Lub: sudo /var/www/panel/panel.sh"
echo ""
echo "ðŸ“‹ DostÄ™pne opcje:"
echo "   1 - ZarzÄ…dzanie serwerami"
echo "   2 - ZarzÄ…dzanie uÅ¼ytkownikami" 
echo "   3 - Uruchom panel web"
echo "   4 - Zatrzymaj panel web"
echo "   5 - Statystyki systemu"
echo "   6 - Backup serwera"
echo "   7 - Konfiguracja"
echo "   8 - WyjÅ›cie"
