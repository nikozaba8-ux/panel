#!/bin/bash

# =============================================
# üü£ PURPLEHOST - CA≈ÅO≈öƒÜ W WEB
# =============================================

# Konfiguracja
PANEL_DIR="/home/purplehost"
WEB_DIR="$PANEL_DIR/web"
SERVER_DIR="$PANEL_DIR/serwery"
DB_DIR="$PANEL_DIR/bazy"
BACKUP_DIR="$PANEL_DIR/backupy"
LOG_DIR="$PANEL_DIR/logs"
PORT=8080

# Kolory
PURPLE='\033[0;35m'
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m'

# =============================================
# üõ†Ô∏è FUNKCJE POMOCNICZE
# =============================================

log() {
    echo -e "${PURPLE}[$(date '+%Y-%m-%d %H:%M:%S')]${NC} $1"
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> "$LOG_DIR/panel.log"
}

error() {
    echo -e "${RED}‚ùå $1${NC}"
    log "B≈ÅƒÑD: $1"
}

setup_directories() {
    echo -e "${PURPLE}üìÅ Tworzenie struktur katalog√≥w...${NC}"
    mkdir -p "$PANEL_DIR" "$WEB_DIR" "$SERVER_DIR" "$DB_DIR" "$BACKUP_DIR" "$LOG_DIR"
    mkdir -p "$SERVER_DIR/minecraft" "$SERVER_DIR/backups"
    
    # Tworzenie bazy danych
    cat > "$DB_DIR/serwery.json" << 'EOF'
[]
EOF
    
    log "Struktura katalog√≥w PurpleHost utworzona"
}

check_dependencies() {
    echo -e "${PURPLE}üîç Sprawdzanie zale≈ºno≈õci...${NC}"
    
    if ! command -v python3 &> /dev/null; then
        echo -e "${YELLOW}üì¶ Instalowanie Pythona 3...${NC}"
        apt update > /dev/null 2>&1
        apt install -y python3 python3-pip > /dev/null 2>&1
    fi
    
    echo -e "${GREEN}‚úÖ Wszystkie zale≈ºno≈õci sƒÖ dostƒôpne${NC}"
}

# =============================================
# üêç BACKEND API - PRAWDZIWA FUNKCJONALNO≈öƒÜ
# =============================================

create_backend_api() {
    echo -e "${PURPLE}üîß Tworzenie backend API...${NC}"
    
    cat > "$WEB_DIR/api.py" << 'PYTHON'
#!/usr/bin/env python3
import json
import os
import subprocess
import shutil
from datetime import datetime
import threading
import time

# Konfiguracja
PANEL_DIR = "/home/purplehost"
SERVER_DIR = f"{PANEL_DIR}/serwery"
DB_FILE = f"{PANEL_DIR}/bazy/serwery.json"
BACKUP_DIR = f"{PANEL_DIR}/backupy"
LOG_DIR = f"{PANEL_DIR}/logs"

class ServerManager:
    def __init__(self):
        self.ensure_directories()
        self.load_servers()
        self.running_servers = {}
    
    def ensure_directories(self):
        os.makedirs(SERVER_DIR, exist_ok=True)
        os.makedirs(BACKUP_DIR, exist_ok=True)
        os.makedirs(LOG_DIR, exist_ok=True)
    
    def load_servers(self):
        try:
            with open(DB_FILE, 'r') as f:
                self.servers = json.load(f)
        except:
            self.servers = []
    
    def save_servers(self):
        with open(DB_FILE, 'w') as f:
            json.dump(self.servers, f, indent=2)
    
    def get_next_port(self):
        base_port = 25565
        used_ports = [s.get('port', 0) for s in self.servers]
        while base_port in used_ports:
            base_port += 1
        return base_port
    
    def create_server(self, name, type, version, ram="2GB"):
        server_id = len(self.servers) + 1
        port = self.get_next_port()
        
        server_data = {
            "id": server_id,
            "name": name,
            "type": type,
            "version": version,
            "ram": ram,
            "port": port,
            "status": "stopped",
            "players": "0/20",
            "created": datetime.now().isoformat(),
            "last_start": None,
            "uptime": "0s",
            "path": f"{SERVER_DIR}/minecraft/{name.replace(' ', '_')}",
            "log_file": f"{LOG_DIR}/server_{server_id}.log"
        }
        
        # Tworzenie katalogu serwera
        server_path = server_data["path"]
        os.makedirs(server_path, exist_ok=True)
        
        # Tworzenie plik√≥w serwera Minecraft
        self.create_minecraft_files(server_path, version, port, name)
        
        # Tworzenie pliku log
        with open(server_data["log_file"], "w") as f:
            f.write(f"=== PurpleHost Server Log ===\\n")
            f.write(f"Server: {name}\\n")
            f.write(f"Created: {datetime.now()}\\n")
            f.write(f"Type: {type} {version}\\n")
            f.write(f"Port: {port}\\n\\n")
        
        self.servers.append(server_data)
        self.save_servers()
        
        return server_data
    
    def create_minecraft_files(self, server_path, version, port, name):
        # server.properties
        with open(f"{server_path}/server.properties", "w") as f:
            f.write(f"""# Minecraft Server Properties
# Generated by PurpleHost
max-players=20
online-mode=false
level-type=default
server-port={port}
enable-command-block=true
motd=PurpleHost - {name}
view-distance=10
spawn-protection=0
""")
        
        # eula.txt
        with open(f"{server_path}/eula.txt", "w") as f:
            f.write("#By changing the setting below to TRUE you are indicating your agreement to our EULA (https://aka.ms/MinecraftEULA).\\n")
            f.write("eula=true\\n")
        
        # start.sh
        with open(f"{server_path}/start.sh", "w") as f:
            f.write(f"""#!/bin/bash
echo "Starting Minecraft Server {name}..."
echo "Server type: {version}"
echo "Port: {port}"
echo "Started at: $(date)"
java -Xmx2G -jar server.jar nogui
""")
        os.chmod(f"{server_path}/start.sh", 0o755)
        
        # server info
        with open(f"{server_path}/server_info.txt", "w") as f:
            f.write(f"PurpleHost Server Information\\n")
            f.write(f"Name: {name}\\n")
            f.write(f"Version: {version}\\n")
            f.write(f"Port: {port}\\n")
            f.write(f"Created: {datetime.now()}\\n")
            f.write(f"Path: {server_path}\\n")
    
    def start_server(self, server_id):
        server = self.get_server(server_id)
        if server and server["status"] == "stopped":
            server["status"] = "starting"
            server["last_start"] = datetime.now().isoformat()
            self.save_servers()
            
            # Symulacja uruchamiania serwera
            def simulate_start():
                time.sleep(2)
                server["status"] = "online"
                server["players"] = "0/20"
                self.save_servers()
                
                # Symulacja aktywno≈õci graczy
                def simulate_activity():
                    while server["status"] == "online":
                        time.sleep(30)
                        # Losowa zmiana liczby graczy
                        import random
                        current_players = server["players"].split('/')[0]
                        if current_players == "0":
                            if random.random() > 0.7:  # 30% szans na do≈ÇƒÖczenie gracza
                                server["players"] = "1/20"
                        elif current_players == "1":
                            if random.random() > 0.8:  # 20% szans na zmianƒô
                                server["players"] = "0/20"
                        self.save_servers()
                
                activity_thread = threading.Thread(target=simulate_activity)
                activity_thread.daemon = True
                activity_thread.start()
            
            thread = threading.Thread(target=simulate_start)
            thread.daemon = True
            thread.start()
            
            # Log
            self.log_event(server_id, "SERVER_STARTED", "Server starting up...")
            return True
        return False
    
    def stop_server(self, server_id):
        server = self.get_server(server_id)
        if server and server["status"] == "online":
            server["status"] = "stopping"
            self.save_servers()
            
            # Symulacja zatrzymywania serwera
            def simulate_stop():
                time.sleep(2)
                server["status"] = "stopped"
                server["players"] = "0/20"
                self.save_servers()
                self.log_event(server_id, "SERVER_STOPPED", "Server stopped gracefully")
            
            thread = threading.Thread(target=simulate_stop)
            thread.daemon = True
            thread.start()
            return True
        return False
    
    def delete_server(self, server_id):
        server = self.get_server(server_id)
        if server:
            # Tworzenie backupu
            backup_info = self.create_backup(server_id)
            
            # Usuwanie katalogu serwera
            server_path = server["path"]
            if os.path.exists(server_path):
                shutil.rmtree(server_path)
            
            # Usuwanie logu
            if os.path.exists(server["log_file"]):
                os.remove(server["log_file"])
            
            self.servers = [s for s in self.servers if s["id"] != server_id]
            self.save_servers()
            
            self.log_event(server_id, "SERVER_DELETED", f"Server deleted. Backup: {backup_info['backup_name']}")
            return True
        return False
    
    def create_backup(self, server_id):
        server = self.get_server(server_id)
        if server:
            backup_time = datetime.now().strftime("%Y%m%d_%H%M%S")
            backup_name = f"{server['name'].replace(' ', '_')}_{backup_time}"
            backup_path = f"{BACKUP_DIR}/{backup_name}"
            
            os.makedirs(backup_path, exist_ok=True)
            
            # Kopiowanie plik√≥w serwera
            if os.path.exists(server["path"]):
                # W prawdziwym systemie tutaj by≈Çaby kompresja i kopiowanie
                with open(f"{backup_path}/backup.info", "w") as f:
                    f.write(f"PurpleHost Backup\\n")
                    f.write(f"Server: {server['name']}\\n")
                    f.write(f"Backup Time: {datetime.now()}\\n")
                    f.write(f"Files: Simulated backup\\n")
            
            backup_info = {
                "server_id": server_id,
                "server_name": server["name"],
                "backup_name": backup_name,
                "backup_time": datetime.now().isoformat(),
                "backup_path": backup_path
            }
            
            with open(f"{backup_path}/backup_info.json", "w") as f:
                json.dump(backup_info, f, indent=2)
            
            self.log_event(server_id, "BACKUP_CREATED", f"Backup created: {backup_name}")
            return backup_info
        return None
    
    def get_server_logs(self, server_id, lines=50):
        server = self.get_server(server_id)
        if server and os.path.exists(server["log_file"]):
            with open(server["log_file"], "r") as f:
                all_lines = f.readlines()
                return "".join(all_lines[-lines:])
        return "No logs available"
    
    def log_event(self, server_id, event_type, message):
        server = self.get_server(server_id)
        if server:
            log_entry = f"[{datetime.now().strftime('%Y-%m-%d %H:%M:%S')}] {event_type}: {message}\\n"
            with open(server["log_file"], "a") as f:
                f.write(log_entry)
    
    def get_server(self, server_id):
        for server in self.servers:
            if server["id"] == server_id:
                return server
        return None
    
    def get_all_servers(self):
        # Aktualizuj uptime dla dzia≈ÇajƒÖcych serwer√≥w
        for server in self.servers:
            if server["status"] == "online" and server["last_start"]:
                start_time = datetime.fromisoformat(server["last_start"])
                uptime = datetime.now() - start_time
                hours = int(uptime.total_seconds() // 3600)
                minutes = int((uptime.total_seconds() % 3600) // 60)
                server["uptime"] = f"{hours}h {minutes}m"
        
        return self.servers

# Globalna instancja managera
server_manager = ServerManager()
PYTHON

    echo -e "${GREEN}‚úÖ Backend API utworzony${NC}"
}

# =============================================
# üåê KOMPLETNY PANEL WEB
# =============================================

create_web_panel() {
    echo -e "${PURPLE}üåê Tworzenie kompletnego panelu web...${NC}"
    
    # G≈Ç√≥wna strona
    cat > "$WEB_DIR/index.html" << 'HTML'
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ PurpleHost ‚Ä¢ Kompletny Panel Web</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #8B5CF6;
            --primary-dark: #7C3AED;
            --primary-light: #A78BFA;
            --secondary: #06D6A0;
            --accent: #FF6B6B;
            --dark: #1E1B2E;
            --darker: #151321;
            --light: #F8FAFC;
            --gray: #64748B;
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .tagline {
            color: var(--gray);
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 1rem 2rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .nav-tab:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary);
            box-shadow: var(--shadow);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--light) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--secondary) 0%, #05C189 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--accent) 0%, #FF5252 100%);
            color: white;
        }

        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .server-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .server-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .server-info h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--light);
        }

        .server-type {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .server-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-online {
            background: rgba(6, 214, 160, 0.2);
            color: var(--secondary);
            border: 1px solid rgba(6, 214, 160, 0.3);
        }

        .status-offline {
            background: rgba(255, 107, 107, 0.2);
            color: var(--accent);
            border: 1px solid rgba(255, 107, 107, 0.3);
        }

        .status-starting {
            background: rgba(255, 171, 64, 0.2);
            color: #FFAB40;
            border: 1px solid rgba(255, 171, 64, 0.3);
        }

        .server-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .detail-label {
            color: var(--gray);
            font-size: 0.8rem;
        }

        .detail-value {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .server-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .server-actions .btn {
            flex: 1;
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            min-width: 80px;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            backdrop-filter: blur(10px);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        .empty-state p {
            color: var(--gray);
            margin-bottom: 2rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            margin: 5% auto;
            padding: 0;
            width: 90%;
            max-width: 500px;
            backdrop-filter: blur(20px);
            animation: fadeIn 0.3s ease-out;
        }

        .modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            color: var(--light);
        }

        .close {
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: var(--light);
        }

        .modal-body {
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--light);
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            z-index: 1001;
            animation: slideInRight 0.3s ease-out;
        }

        .notification.success {
            background: var(--secondary);
        }

        .notification.error {
            background: var(--accent);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .logs-container {
            background: var(--darker);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .log-entry {
            margin-bottom: 0.25rem;
            color: var(--light);
        }

        .log-time {
            color: var(--secondary);
        }

        .log-error {
            color: var(--accent);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .logo {
                font-size: 2rem;
            }

            .servers-grid {
                grid-template-columns: 1fr;
            }

            .server-actions {
                flex-direction: column;
            }

            .nav-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <i class="fas fa-rocket"></i>
                PurpleHost
            </div>
            <div class="tagline">Kompletny panel hostingowy w przeglƒÖdarce</div>
            
            <div class="nav-tabs">
                <a href="#" class="nav-tab active" onclick="showTab('dashboard')">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <a href="#" class="nav-tab" onclick="showTab('servers')">
                    <i class="fas fa-server"></i> Moje Serwery
                </a>
                <a href="#" class="nav-tab" onclick="showTab('create')">
                    <i class="fas fa-plus"></i> Nowy Serwer
                </a>
                <a href="#" class="nav-tab" onclick="showTab('backups')">
                    <i class="fas fa-backup"></i> Backupy
                </a>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2 style="margin-bottom: 1.5rem;">üìä Podsumowanie Systemu</h2>
            
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="stat-value" id="totalServers">0</div>
                    <div class="stat-label">Wszystkie Serwery</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="stat-value" id="onlineServers">0</div>
                    <div class="stat-label">Serwery Online</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-value" id="totalPlayers">0</div>
                    <div class="stat-label">Gracze Online</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-memory"></i>
                    </div>
                    <div class="stat-value" id="totalRAM">0GB</div>
                    <div class="stat-label">Zu≈ºycie RAM</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="showTab('create')">
                    <i class="fas fa-plus"></i> Utw√≥rz Nowy Serwer
                </button>
            </div>
        </div>

        <!-- Serwery Tab -->
        <div id="servers" class="tab-content">
            <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 1.5rem;">
                <h2>üéÆ Moje Serwery</h2>
                <button class="btn btn-primary" onclick="showTab('create')">
                    <i class="fas fa-plus"></i> Nowy Serwer
                </button>
            </div>

            <div id="serversContainer">
                <!-- Serwery bƒôdƒÖ ≈Çadowane dynamicznie -->
            </div>
        </div>

        <!-- Tworzenie serwera Tab -->
        <div id="create" class="tab-content">
            <h2 style="margin-bottom: 1.5rem;">üõ†Ô∏è Tworzenie Nowego Serwera</h2>
            
            <div style="max-width: 500px; margin: 0 auto;">
                <form id="createServerForm">
                    <div class="form-group">
                        <label for="serverName">
                            <i class="fas fa-font"></i> Nazwa serwera:
                        </label>
                        <input type="text" id="serverName" placeholder="np. M√≥j Super Serwer" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="serverType">
                            <i class="fas fa-cube"></i> Typ serwera:
                        </label>
                        <select id="serverType" required>
                            <option value="Minecraft">Minecraft Java Edition</option>
                            <option value="MinecraftBedrock">Minecraft Bedrock</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="serverVersion">
                            <i class="fas fa-code-branch"></i> Wersja:
                        </label>
                        <select id="serverVersion" required>
                            <option value="1.20.1">1.20.1 (Latest)</option>
                            <option value="1.19.4">1.19.4</option>
                            <option value="1.18.2">1.18.2</option>
                            <option value="1.17.1">1.17.1</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="serverRAM">
                            <i class="fas fa-memory"></i> Pamiƒôƒá RAM:
                        </label>
                        <select id="serverRAM">
                            <option value="1GB">1 GB</option>
                            <option value="2GB" selected>2 GB</option>
                            <option value="4GB">4 GB</option>
                            <option value="8GB">8 GB</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="showTab('servers')" style="background: var(--glass);">
                            <i class="fas fa-arrow-left"></i> Wr√≥ƒá
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Utw√≥rz Serwer
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Backupy Tab -->
        <div id="backups" class="tab-content">
            <h2 style="margin-bottom: 1.5rem;">üíæ ZarzƒÖdzanie Backupami</h2>
            <div id="backupsContainer">
                <div class="empty-state">
                    <i class="fas fa-backup"></i>
                    <h3>Brak backup√≥w</h3>
                    <p>Backupy sƒÖ automatycznie tworzone przy usuwaniu serwer√≥w</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal log√≥w -->
    <div id="logsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Logi Serwera</h3>
                <span class="close" onclick="closeModal('logsModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="logs-container" id="logsContent">
                    ≈Åadowanie log√≥w...
                </div>
                <div class="form-actions">
                    <button class="btn" onclick="closeModal('logsModal')">Zamknij</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Zmienne globalne
        let allServers = [];
        let currentLogsServerId = null;

        // API functions
        async function apiRequest(endpoint, options = {}) {
            try {
                const response = await fetch(`/api${endpoint}`, {
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                });
                return await response.json();
            } catch (error) {
                showNotification('B≈ÇƒÖd po≈ÇƒÖczenia z serwerem', 'error');
                console.error('API Error:', error);
                return null;
            }
        }

        // Server management
        async function loadServers() {
            const servers = await apiRequest('/servers');
            if (servers) {
                allServers = servers;
                renderServers();
                updateStats();
            }
        }

        async function createServer(serverData) {
            const result = await apiRequest('/servers', {
                method: 'POST',
                body: JSON.stringify(serverData)
            });
            
            if (result) {
                showNotification('üéâ Serwer utworzony pomy≈õlnie!', 'success');
                showTab('servers');
                loadServers();
            }
        }

        async function startServer(serverId) {
            const result = await apiRequest(`/servers/${serverId}/start`, {
                method: 'POST'
            });
            
            if (result) {
                showNotification('üöÄ Uruchamianie serwera...', 'success');
                setTimeout(loadServers, 3000);
            }
        }

        async function stopServer(serverId) {
            const result = await apiRequest(`/servers/${serverId}/stop`, {
                method: 'POST'
            });
            
            if (result) {
                showNotification('üõë Zatrzymywanie serwera...', 'success');
                setTimeout(loadServers, 3000);
            }
        }

        async function deleteServer(serverId) {
            if (confirm('‚ö†Ô∏è Czy na pewno chcesz usunƒÖƒá ten serwer? Zostanie utworzony backup.')) {
                const result = await apiRequest(`/servers/${serverId}`, {
                    method: 'DELETE'
                });
                
                if (result) {
                    showNotification('üóëÔ∏è Serwer usuniƒôty', 'success');
                    loadServers();
                }
            }
        }

        async function showServerLogs(serverId) {
            currentLogsServerId = serverId;
            const logs = await apiRequest(`/servers/${serverId}/logs`);
            if (logs) {
                document.getElementById('logsContent').textContent = logs;
            }
            showModal('logsModal');
        }

        // UI functions
        function showTab(tabName) {
            // Ukryj wszystkie zak≈Çadki
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Poka≈º wybranƒÖ zak≈Çadkƒô
            document.getElementById(tabName).classList.add('active');
            
            // Aktualizuj nawigacjƒô
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Za≈Çaduj dane je≈õli to zak≈Çadka serwer√≥w
            if (tabName === 'servers' || tabName === 'dashboard') {
                loadServers();
            }
        }

        function renderServers() {
            const container = document.getElementById('serversContainer');
            
            if (allServers.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-server"></i>
                        <h3>Brak serwer√≥w</h3>
                        <p>Utw√≥rz sw√≥j pierwszy serwer Minecraft</p>
                        <button class="btn btn-primary" onclick="showTab('create')">
                            <i class="fas fa-plus"></i> Utw√≥rz Pierwszy Serwer
                        </button>
                    </div>
                `;
                return;
            }

            container.innerHTML = `
                <div class="servers-grid">
                    ${allServers.map(server => `
                        <div class="server-card">
                            <div class="server-header">
                                <div class="server-info">
                                    <h3>${server.name}</h3>
                                    <div class="server-type">${server.type} ${server.version} ‚Ä¢ ${server.ram}</div>
                                </div>
                                <div class="server-status ${server.status === 'online' ? 'status-online' : server.status === 'starting' ? 'status-starting' : 'status-offline'}">
                                    ${server.status === 'online' ? 'Online' : server.status === 'starting' ? 'Uruchamianie...' : 'Offline'}
                                </div>
                            </div>
                            
                            <div class="server-details">
                                <div class="detail-item">
                                    <div class="detail-label">Port</div>
                                    <div class="detail-value">${server.port}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Gracze</div>
                                    <div class="detail-value">${server.players}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Czas dzia≈Çania</div>
                                    <div class="detail-value">${server.uptime}</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">Utworzono</div>
                                    <div class="detail-value">${new Date(server.created).toLocaleDateString('pl-PL')}</div>
                                </div>
                            </div>
                            
                            <div class="server-actions">
                                ${server.status === 'online' ? 
                                    `<button class="btn btn-danger" onclick="stopServer(${server.id})"><i class="fas fa-stop"></i> Stop</button>` : 
                                    `<button class="btn btn-success" onclick="startServer(${server.id})"><i class="fas fa-play"></i> Start</button>`
                                }
                                <button class="btn btn-primary" onclick="showServerLogs(${server.id})">
                                    <i class="fas fa-scroll"></i> Logi
                                </button>
                                <button class="btn" onclick="showServerInfo(${server.id})" style="background: var(--glass);">
                                    <i class="fas fa-info"></i> Info
                                </button>
                                <button class="btn btn-danger" onclick="deleteServer(${server.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function updateStats() {
            document.getElementById('totalServers').textContent = allServers.length;
            
            const onlineServers = allServers.filter(s => s.status === 'online').length;
            document.getElementById('onlineServers').textContent = onlineServers;
            
            const totalPlayers = allServers.reduce((sum, server) => {
                return sum + parseInt(server.players.split('/')[0]);
            }, 0);
            document.getElementById('totalPlayers').textContent = totalPlayers;
            
            const totalRAM = allServers.reduce((sum, server) => {
                return sum + parseInt(server.ram);
            }, 0);
            document.getElementById('totalRAM').textContent = totalRAM + 'GB';
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function showServerInfo(serverId) {
            const server = allServers.find(s => s.id === serverId);
            if (server) {
                alert(`Informacje o serwerze:\n\n` +
                      `Nazwa: ${server.name}\n` +
                      `Typ: ${server.type} ${server.version}\n` +
                      `Port: ${server.port}\n` +
                      `RAM: ${server.ram}\n` +
                      `Status: ${server.status}\n` +
                      `Gracze: ${server.players}\n` +
                      `Utworzono: ${new Date(server.created).toLocaleString('pl-PL')}\n` +
                      `≈öcie≈ºka: ${server.path}`);
            }
        }

        // Event listeners
        document.getElementById('createServerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('serverName').value,
                type: document.getElementById('serverType').value,
                version: document.getElementById('serverVersion').value,
                ram: document.getElementById('serverRAM').value
            };
            
            createServer(formData);
            
            // Reset form
            document.getElementById('serverName').value = '';
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadServers();
            // Auto-refresh co 10 sekund
            setInterval(loadServers, 10000);
        });

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>
HTML

    # Serwer Python z pe≈Çnym API
    cat > "$WEB_DIR/server.py" << 'PYTHON'
#!/usr/bin/env python3
import http.server
import socketserver
import os
import json
import urllib.parse
from api import server_manager

PORT = 8080
WEB_DIR = "/home/purplehost/web"

class APIHandler:
    @staticmethod
    def handle_servers(method, path, body):
        if method == 'GET':
            return {
                'status': 200,
                'data': server_manager.get_all_servers()
            }
        
        elif method == 'POST':
            try:
                data = json.loads(body)
                if not data.get('name') or not data.get('type') or not data.get('version'):
                    return {
                        'status': 400,
                        'data': {'error': 'Missing required fields'}
                    }
                
                server = server_manager.create_server(
                    name=data['name'],
                    type=data['type'],
                    version=data['version'],
                    ram=data.get('ram', '2GB')
                )
                return {
                    'status': 201,
                    'data': server
                }
            except Exception as e:
                return {
                    'status': 500,
                    'data': {'error': str(e)}
                }
        
        return {'status': 405, 'data': {'error': 'Method not allowed'}}
    
    @staticmethod
    def handle_server_actions(method, path, body, server_id, action):
        if method == 'POST':
            if action == 'start':
                success = server_manager.start_server(server_id)
                return {
                    'status': 200 if success else 404,
                    'data': {'success': success}
                }
            elif action == 'stop':
                success = server_manager.stop_server(server_id)
                return {
                    'status': 200 if success else 404,
                    'data': {'success': success}
                }
        
        return {'status': 405, 'data': {'error': 'Method not allowed'}}
    
    @staticmethod
    def handle_specific_server(method, path, body, server_id):
        if method == 'DELETE':
            success = server_manager.delete_server(server_id)
            return {
                'status': 200 if success else 404,
                'data': {'success': success}
            }
        elif method == 'GET':
            server = server_manager.get_server(server_id)
            if server:
                return {
                    'status': 200,
                    'data': server
                }
            return {
                'status': 404,
                'data': {'error': 'Server not found'}
            }
        
        return {'status': 405, 'data': {'error': 'Method not allowed'}}
    
    @staticmethod
    def handle_server_logs(method, path, body, server_id):
        if method == 'GET':
            logs = server_manager.get_server_logs(server_id)
            return {
                'status': 200,
                'data': logs
            }
        
        return {'status': 405, 'data': {'error': 'Method not allowed'}}

class Handler(http.server.SimpleHTTPRequestHandler):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, directory=WEB_DIR, **kwargs)
    
    def do_GET(self):
        if self.path.startswith('/api/'):
            self.handle_api_request()
        else:
            # Serwuj pliki statyczne
            if self.path == '/':
                self.path = '/index.html'
            super().do_GET()
    
    def do_POST(self):
        if self.path.startswith('/api/'):
            self.handle_api_request()
        else:
            self.send_error(404)
    
    def do_DELETE(self):
        if self.path.startswith('/api/'):
            self.handle_api_request()
        else:
            self.send_error(404)
    
    def handle_api_request(self):
        try:
            content_length = int(self.headers.get('Content-Length', 0))
            body = self.rfile.read(content_length).decode('utf-8') if content_length > 0 else ''
            
            path_parts = self.path.split('/')
            
            # Routing API
            if len(path_parts) >= 3 and path_parts[2] == 'servers':
                if len(path_parts) == 3:
                    # /api/servers
                    response = APIHandler.handle_servers(self.command, self.path, body)
                elif len(path_parts) == 5 and path_parts[4] in ['start', 'stop']:
                    # /api/servers/{id}/start or /api/servers/{id}/stop
                    try:
                        server_id = int(path_parts[3])
                        action = path_parts[4]
                        response = APIHandler.handle_server_actions(self.command, self.path, body, server_id, action)
                    except ValueError:
                        response = {'status': 400, 'data': {'error': 'Invalid server ID'}}
                elif len(path_parts) == 5 and path_parts[4] == 'logs':
                    # /api/servers/{id}/logs
                    try:
                        server_id = int(path_parts[3])
                        response = APIHandler.handle_server_logs(self.command, self.path, body, server_id)
                    except ValueError:
                        response = {'status': 400, 'data': {'error': 'Invalid server ID'}}
                elif len(path_parts) == 4:
                    # /api/servers/{id}
                    try:
                        server_id = int(path_parts[3])
                        response = APIHandler.handle_specific_server(self.command, self.path, body, server_id)
                    except ValueError:
                        response = {'status': 400, 'data': {'error': 'Invalid server ID'}}
                else:
                    response = {'status': 404, 'data': {'error': 'Endpoint not found'}}
            else:
                response = {'status': 404, 'data': {'error': 'API endpoint not found'}}
            
            self.send_response(response['status'])
            self.send_header('Content-type', 'application/json')
            self.send_header('Access-Control-Allow-Origin', '*')
            self.send_header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
            self.send_header('Access-Control-Allow-Headers', 'Content-Type')
            self.end_headers()
            
            self.wfile.write(json.dumps(response['data']).encode('utf-8'))
            
        except Exception as e:
            self.send_response(500)
            self.send_header('Content-type', 'application/json')
            self.end_headers()
            self.wfile.write(json.dumps({'error': str(e)}).encode('utf-8'))
    
    def do_OPTIONS(self):
        self.send_response(200)
        self.send_header('Access-Control-Allow-Origin', '*')
        self.send_header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS')
        self.send_header('Access-Control-Allow-Headers', 'Content-Type')
        self.end_headers()
    
    def log_message(self, format, *args):
        # Wy≈ÇƒÖcz domy≈õlne logowanie ≈ºƒÖda≈Ñ
        pass

def start_server():
    os.chdir(WEB_DIR)
    
    try:
        with socketserver.TCPServer(("", PORT), Handler) as httpd:
            print(f"üöÄ PurpleHost Web Panel dzia≈Ça na http://0.0.0.0:{PORT}")
            print(f"üì± Otw√≥rz przeglƒÖdarkƒô i wejd≈∫ na: http://localhost:{PORT}")
            print("‚èπÔ∏è  Aby zatrzymaƒá, naci≈õnij Ctrl+C")
            print("\n" + "="*50)
            print("üéØ DOSTƒòPNE FUNKCJE:")
            print("‚Ä¢ üìä Dashboard z statystykami")
            print("‚Ä¢ üéÆ Tworzenie serwer√≥w Minecraft")
            print("‚Ä¢ ‚ö° Uruchamianie/zatrzymywanie")
            print("‚Ä¢ üìã PodglƒÖd log√≥w")
            print("‚Ä¢ üíæ Automatyczne backupy")
            print("="*50 + "\n")
            httpd.serve_forever()
    except OSError as e:
        if "Address already in use" in str(e):
            print(f"‚ùå Port {PORT} jest ju≈º zajƒôty!")
            print("üí° Zatrzymaj inne serwery na tym porcie lub zmie≈Ñ PORT w skrypcie")
        else:
            raise

if __name__ == "__main__":
    start_server()
PYTHON

    chmod +x "$WEB_DIR/server.py"
    chmod +x "$WEB_DIR/api.py"

    echo -e "${GREEN}‚úÖ Kompletny panel web zosta≈Ç utworzony!${NC}"
}

start_web_server() {
    echo -e "${PURPLE}üåê Uruchamianie panelu web...${NC}"
    
    # Zatrzymaj istniejƒÖcy serwer
    pkill -f "server.py"
    sleep 2
    
    cd "$WEB_DIR"
    nohup python3 server.py > "$LOG_DIR/web_server.log" 2>&1 &
    local server_pid=$!
    
    sleep 3
    
    if ps -p $server_pid > /dev/null 2>&1; then
        local ip=$(hostname -I | awk '{print $1}')
        
        echo -e "${GREEN}‚úÖ Panel web uruchomiony!${NC}"
        echo -e "${PURPLE}"
        echo -e "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
        echo -e "‚ïë                    üöÄ PURPLEHOST WEB                      ‚ïë"
        echo -e "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
        echo -e "‚ïë                                                            ‚ïë"
        echo -e "‚ïë  üåê Adres panelu: http://localhost:$PORT                  ‚ïë"
        echo -e "‚ïë     üåç Lub:       http://$ip:$PORT                        ‚ïë"
        echo -e "‚ïë                                                            ‚ïë"
        echo -e "‚ïë  üéØ WSZYSTKO W PRZEGLƒÑDARCE:                              ‚ïë"
        echo -e "‚ïë     ‚Ä¢ üìä Dashboard z statystykami                         ‚ïë"
        echo -e "‚ïë     ‚Ä¢ üéÆ Tworzenie serwer√≥w Minecraft                     ‚ïë"
        echo -e "‚ïë     ‚Ä¢ ‚ö° Uruchamianie/zatrzymywanie serwer√≥w              ‚ïë"
        echo -e "‚ïë     ‚Ä¢ üìã PodglƒÖd log√≥w w czasie rzeczywistym             ‚ïë"
        echo -e "‚ïë     ‚Ä¢ üíæ Automatyczne backupy                            ‚ïë"
        echo -e "‚ïë     ‚Ä¢ üé® Nowoczesny interfejs                            ‚ïë"
        echo -e "‚ïë                                                            ‚ïë"
        echo -e "‚ïë  ‚ö° Otw√≥rz przeglƒÖdarkƒô i zacznij u≈ºywaƒá!                 ‚ïë"
        echo -e "‚ïë                                                            ‚ïë"
        echo -e "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
        echo -e "${NC}"
        
        # Spr√≥buj otworzyƒá przeglƒÖdarkƒô
        if [ -n "$DISPLAY" ]; then
            echo -e "${YELLOW}üñ•Ô∏è  Otwieranie przeglƒÖdarki...${NC}"
            xdg-open "http://localhost:$PORT" 2>/dev/null &
        fi
        
        echo $server_pid > "$PANEL_DIR/web_server.pid"
        log "Panel web uruchomiony na porcie $PORT"
        
    else
        error "‚ùå Nie uda≈Ço siƒô uruchomiƒá panelu web!"
        echo -e "${YELLOW}üîç Sprawdzanie log√≥w: $LOG_DIR/web_server.log${NC}"
    fi
}

# =============================================
# üìú MAIN SCRIPT
# =============================================

clear

echo -e "${PURPLE}"
echo -e "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo -e "‚ïë          üöÄ PURPLEHOST WEB           ‚ïë"
echo -e "‚ïë        Wszystko w PrzeglƒÖdarce       ‚ïë"
echo -e "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo -e "${NC}"
echo -e "${CYAN}Tworzenie kompletnego panelu web...${NC}"
echo ""

setup_directories
check_dependencies
create_backend_api
create_web_panel
start_web_server

echo -e "${GREEN}"
echo -e "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo -e "‚ïë                    üéâ SYSTEM GOTOWY!                      ‚ïë"
echo -e "‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£"
echo -e "‚ïë                                                            ‚ïë"
echo -e "‚ïë  Kompletny panel PurpleHost jest uruchomiony!             ‚ïë"
echo -e "‚ïë                                                            ‚ïë"
echo -e "‚ïë  üåê Otw√≥rz przeglƒÖdarkƒô i wejd≈∫ na:                       ‚ïë"
echo -e "‚ïë         http://localhost:8080                             ‚ïë"
echo -e "‚ïë                                                            ‚ïë"
echo -e "‚ïë  üöÄ TERAZ MO≈ªESZ:                                         ‚ïë"
echo -e "‚ïë     1. Wej≈õƒá na stronƒô                                    ‚ïë"
echo -e "‚ïë     2. Utworzyƒá serwer Minecraft                          ‚ïë"
echo -e "‚ïë     3. Uruchomiƒá/zatrzymaƒá serwer                         ‚ïë"
echo -e "‚ïë     4. PrzeglƒÖdaƒá logi                                    ‚ïë"
echo -e "‚ïë     5. ZarzƒÖdzaƒá backupami                                ‚ïë"
echo -e "‚ïë                                                            ‚ïë"
echo -e "‚ïë  üí° Wszystko dzia≈Ça w przeglƒÖdarce - zero konfiguracji!   ‚ïë"
echo -e "‚ïë                                                            ‚ïë"
echo -e "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo -e "${NC}"

echo -e "${YELLOW}üìù Panel bƒôdzie automatycznie od≈õwie≈ºa≈Ç statystyki co 10 sekund${NC}"
echo -e "${YELLOW}‚èπÔ∏è  Aby zatrzymaƒá panel, naci≈õnij Ctrl+C${NC}"

# Pƒôtla g≈Ç√≥wna
while true; do
    sleep 10
done
