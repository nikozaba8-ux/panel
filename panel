#!/bin/bash

# RÄ™czne tworzenie katalogÃ³w krok po kroku
echo "=== RÄ˜CZNE TWORZENIE KATALOGÃ“W ==="

# SprawdÅº gdzie jesteÅ›
echo "Obecny katalog: $(pwd)"
echo "UÅ¼ytkownik: $(whoami)"

# SprÃ³buj utworzyÄ‡ w rÃ³Å¼nych lokalizacjach
LOCATIONS=("/home/purplehost" "/tmp/purplehost" "$(pwd)/purplehost")

for location in "${LOCATIONS[@]}"; do
    echo ""
    echo "ğŸ”§ PrÃ³ba utworzenia w: $location"
    
    if mkdir -p "$location" 2>/dev/null; then
        echo "âœ… Sukces! UÅ¼ywam: $location"
        PANEL_DIR="$location"
        break
    else
        echo "âŒ Nie udaÅ‚o siÄ™ utworzyÄ‡"
    fi
done

if [ -z "$PANEL_DIR" ]; then
    echo "ğŸš¨ CRITICAL: Nie udaÅ‚o siÄ™ utworzyÄ‡ Å¼adnego katalogu!"
    echo "SprÃ³buj utworzyÄ‡ rÄ™cznie: mkdir /home/purplehost"
    exit 1
fi

# UtwÃ³rz strukturÄ™
echo ""
echo "ğŸ“ Tworzenie struktury w: $PANEL_DIR"
mkdir -p "$PANEL_DIR"/{web,serwery,bazy,backupy,logs}

# Prosty testowy plik HTML
cat > "$PANEL_DIR/web/index.html" << 'HTML'
<h1>PurpleHost Test</h1>
<p>JeÅ›li widzisz tÄ™ wiadomoÅ›Ä‡, struktura katalogÃ³w dziaÅ‚a!</p>
<p>Katalog: <?php echo __DIR__; ?></p>
HTML

# SprawdÅº
echo ""
echo "ğŸ“‹ Utworzona struktura:"
find "$PANEL_DIR" -type d | sort

echo ""
echo "ğŸ¯ ÅšcieÅ¼ka do uÅ¼ycia w skrypcie: $PANEL_DIR"
