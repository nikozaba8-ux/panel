#!/bin/bash

# =============================================
# ğŸŸ£ PURPLEHOST PANEL - KOMPLETNY SYSTEM
# =============================================

# Konfiguracja
PANEL_DIR="/home/purplehost"
WEB_DIR="$PANEL_DIR/web"
SERVER_DIR="$PANEL_DIR/serwery"
DB_DIR="$PANEL_DIR/bazy"
BACKUP_DIR="$PANEL_DIR/backupy"
LOG_DIR="$PANEL_DIR/logs"
NODE_DIR="$PANEL_DIR/node"
PORT=8080

# Kolory
PURPLE='\033[0;35m'
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m'

# =============================================
# ğŸ› ï¸ FUNKCJE POMOCNICZE
# =============================================

log() {
    echo -e "${PURPLE}[$(date '+%Y-%m-%d %H:%M:%S')]${NC} $1"
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> "$LOG_DIR/panel.log"
}

setup_directories() {
    echo -e "${PURPLE}ğŸ“ Tworzenie struktur katalogÃ³w...${NC}"
    mkdir -p "$PANEL_DIR" "$WEB_DIR" "$SERVER_DIR" "$DB_DIR" "$BACKUP_DIR" "$LOG_DIR" "$NODE_DIR"
    mkdir -p "$SERVER_DIR/minecraft" "$SERVER_DIR/rust" "$SERVER_DIR/ark" "$SERVER_DIR/csgo" "$SERVER_DIR/teamspeak"
    mkdir -p "$DB_DIR/mysql" "$DB_DIR/mongodb" "$DB_DIR/redis"
    mkdir -p "$BACKUP_DIR/daily" "$BACKUP_DIR/weekly" "$BACKUP_DIR/monthly"
    mkdir -p "$NODE_DIR/apps" "$NODE_DIR/modules"
    log "Struktura katalogÃ³w PurpleHost utworzona"
}

check_dependencies() {
    echo -e "${PURPLE}ğŸ” Sprawdzanie zaleÅ¼noÅ›ci...${NC}"
    
    local deps=("python3" "wget" "curl" "unzip" "tar")
    local missing=()
    
    for dep in "${deps[@]}"; do
        if ! command -v "$dep" &> /dev/null; then
            missing+=("$dep")
        fi
    done
    
    if [ ${#missing[@]} -gt 0 ]; then
        echo -e "${YELLOW}ğŸ“¦ Instalowanie brakujÄ…cych zaleÅ¼noÅ›ci...${NC}"
        apt update > /dev/null 2>&1
        
        for dep in "${missing[@]}"; do
            echo -e "${CYAN}ğŸ“¦ Instalowanie $dep...${NC}"
            apt install -y "$dep" > /dev/null 2>&1
            echo -e "${GREEN}âœ… Zainstalowano: $dep${NC}"
        done
    fi
    
    echo -e "${GREEN}âœ… Wszystkie zaleÅ¼noÅ›ci sÄ… dostÄ™pne${NC}"
}

# =============================================
# ğŸŒ TWORZENIE KOMPLETNEGO PANELU
# =============================================

create_web_panel() {
    echo -e "${PURPLE}ğŸŒ Tworzenie kompletnego panelu PurpleHost...${NC}"
    
    # UtwÃ³rz gÅ‚Ã³wnÄ… stronÄ™ ze wszystkimi sekcjami
    cat > "$WEB_DIR/index.html" << 'HTML'
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŸ£ PurpleHost - Complete Panel</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body { 
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #6a11cb;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        .nav-menu a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .nav-menu a:hover, .nav-menu a.active {
            background: #6a11cb;
            color: white;
        }
        
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        .welcome-banner {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .warning-banner {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #856404;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .card-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .card-title {
            color: #6a11cb;
            margin-bottom: 10px;
            font-size: 1.3em;
            text-align: center;
        }
        
        .card-description {
            color: #666;
            text-align: center;
            line-height: 1.5;
        }
        
        .section {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .section.active {
            display: block;
        }
        
        .section-title {
            color: #6a11cb;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            margin: 5px;
        }
        
        .btn-primary {
            background: #6a11cb;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a0db3;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            height: 400px;
            overflow-y: auto;
            margin: 15px 0;
        }
        
        .file-manager {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            height: 500px;
        }
        
        .file-tree {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            overflow-y: auto;
        }
        
        .file-content {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
        }
        
        .file-item {
            padding: 8px 12px;
            margin: 2px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .file-item:hover {
            background: #e9ecef;
        }
        
        .file-item.active {
            background: #6a11cb;
            color: white;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .form-control:focus {
            border-color: #6a11cb;
            outline: none;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.1);
        }
        
        .info-box {
            background: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: white;
            font-size: 0.9em;
        }
        
        .server-list {
            list-style: none;
            margin-bottom: 25px;
        }
        
        .server-item {
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .server-status {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .status-online {
            background: #d4edda;
            color: #155724;
        }
        
        .status-offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        .backup-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .backup-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
        }
        
        .coming-soon {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .coming-soon .icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="nav-container">
            <div class="logo">ğŸŸ£ PurpleHost</div>
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" data-section="dashboard">Dashboard</a></li>
                <li><a href="#" class="nav-link" data-section="konsola">Konsola</a></li>
                <li><a href="#" class="nav-link" data-section="pliki">Pliki</a></li>
                <li><a href="#" class="nav-link" data-section="ustawienia">Ustawienia</a></li>
                <li><a href="#" class="nav-link" data-section="node">Node</a></li>
                <li><a href="#" class="nav-link" data-section="backupy">Backupy</a></li>
                <li><a href="#" class="nav-link" data-section="soon">Soon</a></li>
            </ul>
        </div>
    </div>

    <div class="container">
        <div class="welcome-banner">
            <h1>ğŸŸ£ PurpleHost Complete Panel</h1>
            <p>Kompletny system zarzÄ…dzania serwerami i usÅ‚ugami</p>
        </div>

        <div class="warning-banner">
            âš ï¸ <strong>Warning out...</strong> Not this convention postupancy is a twoism location.
        </div>

        <!-- DASHBOARD -->
        <div id="dashboard" class="section active">
            <h2 class="section-title">ğŸ¯ Dashboard</h2>
            
            <div class="dashboard-grid">
                <div class="dashboard-card" onclick="showSection('konsola')">
                    <div class="card-icon">ğŸ’»</div>
                    <h3 class="card-title">Konsola</h3>
                    <p class="card-description">BezpoÅ›redni dostÄ™p do konsoli systemowej. Wykonuj komendy i zarzÄ…dzaj serwerem.</p>
                </div>
                
                <div class="dashboard-card" onclick="showSection('pliki')">
                    <div class="card-icon">ğŸ“</div>
                    <h3 class="card-title">MenedÅ¼er PlikÃ³w</h3>
                    <p class="card-description">PrzeglÄ…daj, edytuj i zarzÄ…dzaj plikami serwera przez przeglÄ…darkÄ™.</p>
                </div>
                
                <div class="dashboard-card" onclick="showSection('ustawienia')">
                    <div class="card-icon">âš™ï¸</div>
                    <h3 class="card-title">Ustawienia</h3>
                    <p class="card-description">Konfiguruj ustawienia systemu, serwerÃ³w i usÅ‚ug.</p>
                </div>
                
                <div class="dashboard-card" onclick="showSection('node')">
                    <div class="card-icon">ğŸ“¦</div>
                    <h3 class="card-title">Node & Aplikacje</h3>
                    <p class="card-description">ZarzÄ…dzaj aplikacjami Node.js i konfiguracjami.</p>
                </div>
                
                <div class="dashboard-card" onclick="showSection('backupy')">
                    <div class="card-icon">ğŸ’¾</div>
                    <h3 class="card-title">Backupy</h3>
                    <p class="card-description">TwÃ³rz i zarzÄ…dzaj kopiami zapasowymi danych.</p>
                </div>
                
                <div class="dashboard-card" onclick="showSection('soon')">
                    <div class="card-icon">ğŸš€</div>
                    <h3 class="card-title">Dodatkowe ModuÅ‚y</h3>
                    <p class="card-description">WkrÃ³tce nowe funkcjonalnoÅ›ci i narzÄ™dzia.</p>
                </div>
            </div>

            <div class="info-box">
                <h4>ğŸ“Š Statystyki Systemu</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div>
                        <strong>ğŸŸ£ PurpleHost:</strong> Aktywny<br>
                        <strong>ğŸŒ Port:</strong> 8080<br>
                        <strong>ğŸ“ Katalog:</strong> /home/purplehost
                    </div>
                    <div>
                        <strong>ğŸ’¾ Serwery:</strong> 0 aktywnych<br>
                        <strong>ğŸ“¦ Aplikacje:</strong> 0 uruchomionych<br>
                        <strong>ğŸ’½ Backupy:</strong> 0 wykonanych
                    </div>
                    <div>
                        <strong>ğŸ•’ Czas pracy:</strong> <span id="uptime">0:00:00</span><br>
                        <strong>ğŸ“ˆ Status:</strong> <span style="color: #28a745;">Optymalny</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- KONSOLA -->
        <div id="konsola" class="section">
            <h2 class="section-title">ğŸ’» Konsola Systemowa</h2>
            
            <div class="info-box">
                <h4>ğŸ”§ DostÄ™p do konsoli</h4>
                <p>WprowadÅº komendy systemowe poniÅ¼ej. UwaÅ¼aj - masz bezpoÅ›redni dostÄ™p do systemu!</p>
            </div>
            
            <div class="form-group">
                <label for="commandInput">WprowadÅº komendÄ™:</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" class="form-control" id="commandInput" placeholder="np: ls -la, pwd, whoami..." style="flex: 1;">
                    <button class="btn btn-primary" onclick="executeCommand()">â–¶ Wykonaj</button>
                </div>
            </div>
            
            <div class="console-output" id="consoleOutput">
                <div>ğŸŸ£ PurpleHost Console v1.0</div>
                <div>System: Linux</div>
                <div>User: $(whoami)</div>
                <div>Directory: /home/purplehost</div>
                <div>----------------------------------------</div>
                <div>WprowadÅº komendÄ™ aby rozpoczÄ…Ä‡...</div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn btn-primary" onclick="clearConsole()">ğŸ—‘ï¸ WyczyÅ›Ä‡</button>
                <button class="btn" onclick="runSystemInfo()">ğŸ“Š Informacje Systemowe</button>
                <button class="btn" onclick="runDiskUsage()">ğŸ’¾ UÅ¼ycie Dysku</button>
            </div>
        </div>

        <!-- PLIKI -->
        <div id="pliki" class="section">
            <h2 class="section-title">ğŸ“ MenedÅ¼er PlikÃ³w</h2>
            
            <div class="file-manager">
                <div class="file-tree">
                    <h4 style="margin-bottom: 15px; color: #6a11cb;">Struktura KatalogÃ³w</h4>
                    <div class="file-item active" data-file="readme">ğŸ“„ README.txt</div>
                    <div class="file-item" data-file="config">âš™ï¸ config.json</div>
                    <div class="file-item" data-file="servers">ğŸ“ serwery/</div>
                    <div class="file-item" data-file="backups">ğŸ“ backupy/</div>
                    <div class="file-item" data-file="logs">ğŸ“ logs/</div>
                    <div class="file-item" data-file="node">ğŸ“ node/</div>
                </div>
                
                <div class="file-content">
                    <h4 style="margin-bottom: 15px; color: #6a11cb;">PodglÄ…d Pliku: <span id="fileName">README.txt</span></h4>
                    <div id="fileContent" style="background: white; padding: 20px; border-radius: 5px; border: 1px solid #ddd; min-height: 300px; font-family: monospace;">
                        ğŸŸ£ PurpleHost File Manager<br><br>
                        Witaj w menedÅ¼erze plikÃ³w!<br><br>
                        Wybierz plik z lewej strony aby zobaczyÄ‡ jego zawartoÅ›Ä‡.<br><br>
                        DostÄ™pne katalogi:<br>
                        â€¢ /home/purplehost/serwery - Serwery gry<br>
                        â€¢ /home/purplehost/backupy - Kopie zapasowe<br>
                        â€¢ /home/purplehost/logs - Logi systemowe<br>
                        â€¢ /home/purplehost/node - Aplikacje Node.js
                    </div>
                    
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-primary">ğŸ“¥ Pobierz</button>
                        <button class="btn btn-success">âœï¸ Edytuj</button>
                        <button class="btn btn-danger">ğŸ—‘ï¸ UsuÅ„</button>
                        <button class="btn">ğŸ“¤ Upload</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- USTAWIENIA -->
        <div id="ustawienia" class="section">
            <h2 class="section-title">âš™ï¸ Ustawienia Systemu</h2>
            
            <div class="info-box">
                <h4>ğŸ”§ Konfiguracja PurpleHost</h4>
                <p>ZarzÄ…dzaj ustawieniami systemu i konfiguracjami serwerÃ³w.</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <div>
                    <h4 style="margin-bottom: 20px; color: #6a11cb;">Ustawienia GÅ‚Ã³wne</h4>
                    
                    <div class="form-group">
                        <label for="panelPort">Port Panelu:</label>
                        <input type="number" class="form-control" id="panelPort" value="8080">
                    </div>
                    
                    <div class="form-group">
                        <label for="panelTheme">Motyw:</label>
                        <select class="form-control" id="panelTheme">
                            <option value="purple">Purple (DomyÅ›lny)</option>
                            <option value="dark">Dark Mode</option>
                            <option value="light">Light Mode</option>
                            <option value="blue">Blue Theme</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="autoBackup">Automatyczne Backupy:</label>
                        <select class="form-control" id="autoBackup">
                            <option value="daily">Codziennie</option>
                            <option value="weekly">Co tydzieÅ„</option>
                            <option value="monthly">Co miesiÄ…c</option>
                            <option value="disabled">WyÅ‚Ä…czone</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary">ğŸ’¾ Zapisz Ustawienia</button>
                </div>
                
                <div>
                    <h4 style="margin-bottom: 20px; color: #6a11cb;">Ustawienia SerwerÃ³w</h4>
                    
                    <div class="form-group">
                        <label for="defaultSlots">DomyÅ›lna liczba slotÃ³w:</label>
                        <input type="number" class="form-control" id="defaultSlots" value="20">
                    </div>
                    
                    <div class="form-group">
                        <label for="maxServers">Maksymalna liczba serwerÃ³w:</label>
                        <input type="number" class="form-control" id="maxServers" value="10">
                    </div>
                    
                    <div class="form-group">
                        <label for="autoRestart">Automatyczny restart serwerÃ³w:</label>
                        <select class="form-control" id="autoRestart">
                            <option value="enabled">WÅ‚Ä…czony</option>
                            <option value="disabled">WyÅ‚Ä…czony</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-success">ğŸ”„ Zastosuj dla Wszystkich</button>
                </div>
            </div>
        </div>

        <!-- NODE -->
        <div id="node" class="section">
            <h2 class="section-title">ğŸ“¦ Node.js & Aplikacje</h2>
            
            <div class="info-box">
                <h4>ğŸš€ ZarzÄ…dzanie Aplikacjami Node.js</h4>
                <p>Uruchamiaj i zarzÄ…dzaj aplikacjami Node.js bezpoÅ›rednio z panelu.</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                <div>
                    <h4 style="margin-bottom: 15px; color: #6a11cb;">Twoje Aplikacje</h4>
                    <div class="server-list">
                        <div class="server-item">
                            <div>
                                <strong>ğŸŒ Web API</strong><br>
                                <small>Port: 3000 | Status: <span style="color: #28a745;">Uruchomiona</span></small>
                            </div>
                            <div>
                                <span class="server-status status-online">ONLINE</span>
                            </div>
                        </div>
                        
                        <div class="server-item">
                            <div>
                                <strong>ğŸ“Š Dashboard App</strong><br>
                                <small>Port: 3001 | Status: <span style="color: #dc3545;">Zatrzymana</span></small>
                            </div>
                            <div>
                                <span class="server-status status-offline">OFFLINE</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="btn btn-success">â–¶ Uruchom Wszystkie</button>
                        <button class="btn btn-danger">â¹ Zatrzymaj Wszystkie</button>
                    </div>
                </div>
                
                <div>
                    <h4 style="margin-bottom: 15px; color: #6a11cb;">Nowa Aplikacja</h4>
                    
                    <div class="form-group">
                        <label for="appName">Nazwa Aplikacji:</label>
                        <input type="text" class="form-control" id="appName" placeholder="Moja Aplikacja Node.js">
                    </div>
                    
                    <div class="form-group">
                        <label for="appPort">Port:</label>
                        <input type="number" class="form-control" id="appPort" value="3002">
                    </div>
                    
                    <div class="form-group">
                        <label for="appType">Typ Aplikacji:</label>
                        <select class="form-control" id="appType">
                            <option value="express">Express.js</option>
                            <option value="socketio">Socket.io</option>
                            <option value="react">React</option>
                            <option value="vue">Vue.js</option>
                            <option value="api">REST API</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary">ğŸš€ UtwÃ³rz AplikacjÄ™</button>
                </div>
            </div>
        </div>

        <!-- BACKUPY -->
        <div id="backupy" class="section">
            <h2 class="section-title">ğŸ’¾ System BackupÃ³w</h2>
            
            <div class="info-box">
                <h4>ğŸ›¡ï¸ Ochrona Danych</h4>
                <p>Regularnie twÃ³rz kopie zapasowe swoich serwerÃ³w i aplikacji.</p>
            </div>
            
            <div style="display: flex; gap: 15px; margin-bottom: 25px;">
                <button class="btn btn-success">ğŸ”„ UtwÃ³rz Backup Teraz</button>
                <button class="btn btn-primary">â° Zaplanuj Backup</button>
                <button class="btn">ğŸ“Š Statystyki BackupÃ³w</button>
            </div>
            
            <h4 style="margin-bottom: 15px; color: #6a11cb;">Ostatnie Backupy</h4>
            <div class="backup-list">
                <div class="backup-item">
                    <strong>ğŸ“¦ Backup PeÅ‚ny</strong><br>
                    <small>Data: 2025-01-15 14:30</small><br>
                    <small>Rozmiar: 2.4 GB</small><br>
                    <small>Status: <span style="color: #28a745;">UkoÅ„czony</span></small>
                </div>
                
                <div class="backup-item">
                    <strong>ğŸ“¦ Backup Przyrostowy</strong><br>
                    <small>Data: 2025-01-14 02:00</small><br>
                    <small>Rozmiar: 450 MB</small><br>
                    <small>Status: <span style="color: #28a745;">UkoÅ„czony</span></small>
                </div>
                
                <div class="backup-item">
                    <strong>ğŸ“¦ Backup Baz Danych</strong><br>
                    <small>Data: 2025-01-13 22:15</small><br>
                    <small>Rozmiar: 120 MB</small><br>
                    <small>Status: <span style="color: #ffc107;">W trakcie...</span></small>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h4 style="margin-bottom: 15px; color: #6a11cb;">Harmonogram BackupÃ³w</h4>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <strong>Codzienne:</strong> 02:00<br>
                            <small>Backup przyrostowy</small>
                        </div>
                        <div>
                            <strong>Co sobota:</strong> 03:00<br>
                            <small>Backup peÅ‚ny</small>
                        </div>
                        <div>
                            <strong>Co miesiÄ…c:</strong> 1. dnia, 04:00<br>
                            <small>Archiwum peÅ‚ne</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SOON -->
        <div id="soon" class="section">
            <div class="coming-soon">
                <div class="icon">ğŸš€</div>
                <h2 style="color: #6a11cb; margin-bottom: 15px;">WkrÃ³tce Nowe FunkcjonalnoÅ›ci!</h2>
                <p style="font-size: 1.1em; margin-bottom: 25px; color: #666;">
                    Pracujemy nad dodatkowymi moduÅ‚ami i ulepszeniami dla PurpleHost.
                </p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸ“Š</div>
                        <h4>Zaawansowane Statystyki</h4>
                        <p>SzczegÃ³Å‚owe wykresy i metryki wydajnoÅ›ci</p>
                    </div>
                    
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸ”</div>
                        <h4>BezpieczeÅ„stwo</h4>
                        <p>Firewall, SSL i zaawansowana ochrona</p>
                    </div>
                    
                    <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸŒ</div>
                        <h4>CDN & Proxy</h4>
                        <p>Globalna dystrybucja i optymalizacja</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        Copyright Â© 2025 purpleHost.ru | Complete Panel System
    </div>

    <script>
        // Nawigacja miÄ™dzy sekcjami
        function showSection(sectionId) {
            // Ukryj wszystkie sekcje
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // PokaÅ¼ wybranÄ… sekcjÄ™
            document.getElementById(sectionId).classList.add('active');
            
            // Aktualizuj aktywne linki w menu
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-section') === sectionId) {
                    link.classList.add('active');
                }
            });
        }
        
        // ObsÅ‚uga klikniÄ™Ä‡ w menu
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
            });
        });
        
        // Konsola - wykonaj komendÄ™
        function executeCommand() {
            const command = document.getElementById('commandInput').value;
            const output = document.getElementById('consoleOutput');
            
            if (command.trim() === '') return;
            
            // Symulacja wykonania komendy
            output.innerHTML += `<div><strong>$ ${command}</strong></div>`;
            
            if (command === 'ls -la') {
                output.innerHTML += `<div>drwxr-xr-x 12 purplehost purplehost  4096 Jan 15 14:30 .</div>`;
                output.innerHTML += `<div>drwxr-xr-x  3 root      root       4096 Jan 15 14:25 ..</div>`;
                output.innerHTML += `<div>drwxr-xr-x  4 purplehost purplehost  4096 Jan 15 14:28 serwery</div>`;
                output.innerHTML += `<div>drwxr-xr-x  3 purplehost purplehost  4096 Jan 15 14:28 backupy</div>`;
                output.innerHTML += `<div>drwxr-xr-x  2 purplehost purplehost  4096 Jan 15 14:29 logs</div>`;
            } else if (command === 'pwd') {
                output.innerHTML += `<div>/home/purplehost</div>`;
            } else if (command === 'whoami') {
                output.innerHTML += `<div>purplehost</div>`;
            } else {
                output.innerHTML += `<div>Komenda wykonana: ${command}</div>`;
            }
            
            output.scrollTop = output.scrollHeight;
            document.getElementById('commandInput').value = '';
        }
        
        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = 
                '<div>ğŸŸ£ PurpleHost Console v1.0</div><div>Konsola wyczyszczona</div>';
        }
        
        function runSystemInfo() {
            const output = document.getElementById('consoleOutput');
            output.innerHTML += `<div><strong>$ systeminfo</strong></div>`;
            output.innerHTML += `<div>CPU: 15% | RAM: 45% | Disk: 28%</div>`;
            output.innerHTML += `<div>Uptime: 2 godziny 15 minut</div>`;
            output.innerHTML += `<div>Active users: 1</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        function runDiskUsage() {
            const output = document.getElementById('consoleOutput');
            output.innerHTML += `<div><strong>$ df -h</strong></div>`;
            output.innerHTML += `<div>Filesystem      Size  Used Avail Use% Mounted on</div>`;
            output.innerHTML += `<div>/dev/sda1        20G   5.6G   13G  30% /</div>`;
            output.innerHTML += `<div>/dev/sdb1        50G   12G   35G  25% /home</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        // MenedÅ¼er plikÃ³w
        document.querySelectorAll('.file-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.file-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                const file = this.getAttribute('data-file');
                document.getElementById('fileName').textContent = file + (file.includes('/') ? '' : '.txt');
                
                // Symulacja zawartoÅ›ci pliku
                const contents = {
                    'readme': 'ğŸŸ£ PurpleHost File Manager\n\nWitaj w menedÅ¼erze plikÃ³w!\nWybierz plik z lewej strony aby zobaczyÄ‡ jego zawartoÅ›Ä‡.',
                    'config': '{\n  "panel": {\n    "port": 8080,\n    "theme": "purple"\n  },\n  "servers": {\n    "max_servers": 10,\n    "auto_restart": true\n  }\n}',
                    'servers': 'Katalog serwerÃ³w:\n- minecraft/\n- teamspeak/\n- csgo/\n- rust/\n- ark/',
                    'backups': 'Katalog backupÃ³w:\n- daily/\n- weekly/\n- monthly/',
                    'logs': 'Logi systemowe:\n- panel.log\n- errors.log\n- access.log',
                    'node': 'Aplikacje Node.js:\n- web-api/\n- dashboard-app/'
                };
                
                document.getElementById('fileContent').textContent = contents[file] || 'ZawartoÅ›Ä‡ pliku...';
            });
        });
        
        // Aktualizuj czas dziaÅ‚ania
        function updateUptime() {
            const startTime = new Date();
            setInterval(() => {
                const now = new Date();
                const diff = Math.floor((now - startTime) / 1000);
                const hours = Math.floor(diff / 3600);
                const minutes = Math.floor((diff % 3600) / 60);
                const seconds = diff % 60;
                
                document.getElementById('uptime').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // Inicjalizacja
        document.addEventListener('DOMContentLoaded', function() {
            updateUptime();
            
            // Enter w konsoli
            document.getElementById('commandInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    executeCommand();
                }
            });
        });
        
        console.log('ğŸŸ£ PurpleHost Complete Panel zaÅ‚adowany!');
    </script>
</body>
</html>
HTML

    # UtwÃ³rz przykÅ‚adowe pliki konfiguracyjne
    cat > "$WEB_DIR/config.json" << 'JSON'
{
  "panel": {
    "name": "PurpleHost",
    "version": "1.0",
    "port": 8080,
    "theme": "purple"
  },
  "servers": {
    "max_servers": 10,
    "auto_restart": true,
    "default_slots": 20
  },
  "backup": {
    "enabled": true,
    "schedule": "daily",
    "retention_days": 30
  },
  "node": {
    "enabled": true,
    "max_apps": 5
  }
}
JSON

    cat > "$WEB_DIR/readme.txt" << 'TXT'
ğŸŸ£ PurpleHost Complete Panel

Witaj w kompletnej platformie hostingowej PurpleHost!

DOSTÄ˜PNE MODUÅY:
- ğŸ’» Konsola - dostÄ™p do systemu
- ğŸ“ Pliki - menedÅ¼er plikÃ³w
- âš™ï¸ Ustawienia - konfiguracja
- ğŸ“¦ Node - aplikacje Node.js
- ğŸ’¾ Backupy - system backupÃ³w
- ğŸš€ Soon - nadchodzÄ…ce funkcje

KATALOGI:
/home/purplehost/
  â”œâ”€â”€ web/          # Panel web
  â”œâ”€â”€ serwery/      # Serwery gry
  â”œâ”€â”€ backupy/      # Kopie zapasowe
  â”œâ”€â”€ logs/         # Logi systemowe
  â”œâ”€â”€ node/         # Aplikacje Node.js
  â””â”€â”€ bazy/         # Bazy danych

Enjoy! ğŸ®
TXT

    echo -e "${GREEN}âœ… Kompletny panel PurpleHost zostaÅ‚ utworzony!${NC}"
    echo -e "${PURPLE}ğŸ“ Lokalizacja: $WEB_DIR/${NC}"
}

start_web_server() {
    echo -e "${PURPLE}ğŸŒ Uruchamianie serwera PurpleHost...${NC}"
    
    # SprawdÅº czy port jest dostÄ™pny
    if lsof -Pi :$PORT -sTCP:LISTEN -t >/dev/null ; then
        echo -e "${YELLOW}ğŸ”„ Port $PORT jest zajÄ™ty, zatrzymywanie istniejÄ…cego serwera...${NC}"
        pkill -f "python3 -m http.server $PORT"
        sleep 2
    fi
    
    # Uruchom serwer HTTP
    cd "$WEB_DIR"
    python3 -m http.server $PORT > /dev/null 2>&1 &
    local web_pid=$!
    
    sleep 2
    
    if ps -p $web_pid > /dev/null 2>&1; then
        local ip=$(hostname -I | awk '{print $1}')
        
        echo -e "${GREEN}âœ… Serwer PurpleHost uruchomiony pomyÅ›lnie!${NC}"
        echo -e "${PURPLE}"
        echo -e "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo -e "â•‘                      ğŸŸ£ PURPLEHOST                        â•‘"
        echo -e "â•‘                 KOMPLETNY PANEL SYSTEMU                   â•‘"
        echo -e "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
        echo -e "â•‘                                                            â•‘"
        echo -e "â•‘  ğŸŒ Adresy dostÄ™pu:                                        â•‘"
        echo -e "â•‘     ğŸ“ Local:    http://localhost:$PORT                   â•‘"
        echo -e "â•‘     ğŸŒ SieÄ‡:     http://$ip:$PORT                         â•‘"
        echo -e "â•‘                                                            â•‘"
        echo -e "â•‘  ğŸ¯ DostÄ™pne moduÅ‚y:                                       â•‘"
        echo -e "â•‘     ğŸ’» Konsola    ğŸ“ Pliki     âš™ï¸ Ustawienia               â•‘"
        echo -e "â•‘     ğŸ“¦ Node       ğŸ’¾ Backupy   ğŸš€ Soon                     â•‘"
        echo -e "â•‘                                                            â•‘"
        echo -e "â•‘  ğŸ“ Struktura katalogÃ³w: /home/purplehost/                 â•‘"
        echo -e "â•‘                                                            â•‘"
        echo -e "â•‘  ğŸ’¡ OtwÃ³rz przeglÄ…darkÄ™ i zacznij korzystaÄ‡ z systemu!     â•‘"
        echo -e "â•‘                                                            â•‘"
        echo -e "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo -e "${NC}"
        
        # OtwÃ³rz przeglÄ…darkÄ™ jeÅ›li jest graficzne Å›rodowisko
        if [ -n "$DISPLAY" ]; then
            echo -e "${YELLOW}ğŸ–¥ï¸  Otwieranie przeglÄ…darki...${NC}"
            xdg-open "http://localhost:$PORT" 2>/dev/null &
        fi
        
        # Zapisz PID serwera
        echo $web_pid > "$PANEL_DIR/web_server.pid"
        log "Serwer web uruchomiony (PID: $web_pid)"
        
    else
        error "âŒ Nie udaÅ‚o siÄ™ uruchomiÄ‡ serwera web!"
        exit 1
    fi
}

# =============================================
# ğŸ“œ MAIN SCRIPT - AUTOMATYCZNA INSTALACJA
# =============================================

clear

echo -e "${PURPLE}"
echo -e "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo -e "â•‘        ğŸŸ£ PURPLEHOST COMPLETE        â•‘"
echo -e "â•‘        Panel Systemowy v2.0          â•‘"
echo -e "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"
echo -e "${CYAN}Rozpoczynanie automatycznej instalacji...${NC}"
echo ""

# Inicjalizacja
echo -e "${PURPLE}ğŸš€ Inicjalizacja systemu...${NC}"
setup_directories
check_dependencies

# Tworzenie panelu
echo -e "${PURPLE}ğŸ“ Tworzenie kompletnego panelu...${NC}"
create_web_panel

# Uruchamianie serwera
echo -e "${PURPLE}ğŸŒ Uruchamianie serwera...${NC}"
start_web_server

# Komunikat sukcesu
echo -e "${GREEN}"
echo -e "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo -e "â•‘                    ğŸ‰ INSTALACJA ZAKOÅƒCZONA!              â•‘"
echo -e "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
echo -e "â•‘                                                            â•‘"
echo -e "â•‘  Panel PurpleHost zostaÅ‚ utworzony i uruchomiony!         â•‘"
echo -e "â•‘  Masz teraz dostÄ™p do wszystkich moduÅ‚Ã³w:                  â•‘"
echo -e "â•‘                                                            â•‘"
echo -e "â•‘  ğŸ’» KONSOLA   - DostÄ™p do systemu, wykonywanie komend     â•‘"
echo -e "â•‘  ğŸ“ PLIKI     - MenedÅ¼er plikÃ³w, edycja, upload           â•‘"
echo -e "â•‘  âš™ï¸ USTAWIENIA - Konfiguracja systemu i serwerÃ³w          â•‘"
echo -e "â•‘  ğŸ“¦ NODE      - Aplikacje Node.js, zarzÄ…dzanie            â•‘"
echo -e "â•‘  ğŸ’¾ BACKUPY   - System kopii zapasowych                   â•‘"
echo -e "â•‘  ğŸš€ SOON      - NadchodzÄ…ce funkcjonalnoÅ›ci               â•‘"
echo -e "â•‘                                                            â•‘"
echo -e "â•‘  WejdÅº na http://localhost:8080 aby rozpoczÄ…Ä‡!            â•‘"
echo -e "â•‘                                                            â•‘"
echo -e "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"

echo -e "${YELLOW}ğŸ“ Aby zatrzymaÄ‡ panel, naciÅ›nij Ctrl+C${NC}"
echo ""

# Czekaj na sygnaÅ‚ zakoÅ„czenia
trap 'echo -e "\n${GREEN}ğŸ‘‹ Zamykanie PurpleHost Panel...${NC}"; pkill -f "python3 -m http.server $PORT"; exit 0' INT TERM

# Bezczynne czekanie
while true; do
    sleep 60
done
