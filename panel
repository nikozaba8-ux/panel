#!/bin/bash

echo "ðŸ¦– Instalacja Panelu Pterodactyl z WyÅ›wietlaniem LimitÃ³w..."

if [ "$EUID" -ne 0 ]; then
    echo "Uruchom jako root: sudo $0"
    exit 1
fi

# Zainstaluj zaleÅ¼noÅ›ci
echo "ðŸ“¦ Instalowanie zaleÅ¼noÅ›ci..."
apt update
apt install -y netcat jq wget curl unzip python3 python3-pip default-jre

# Zainstaluj Python dependencies
pip3 install flask django fastapi uvicorn

# UtwÃ³rz katalogi
mkdir -p /home/panel/{servers,logs,backups,config,web,users,databases,resources}

# Skopiuj panel
cp panel.sh /usr/local/bin/pterodactyl-panel
chmod +x /usr/local/bin/pterodactyl-panel

# UtwÃ³rz usÅ‚ugÄ™ systemd
cat > /etc/systemd/system/pterodactyl-panel.service << EOF
[Unit]
Description=Pterodactyl-like Panel with Limits Display
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/home/panel
ExecStart=/usr/local/bin/pterodactyl-panel
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable pterodactyl-panel

echo "âœ… Instalacja zakoÅ„czona!"
echo "ðŸš€ Uruchom panel: sudo systemctl start pterodactyl-panel"
echo "ðŸŒ Panel Admin: http://localhost:8080"
echo "ðŸ‘¤ PrzykÅ‚ad Klienta: http://localhost:8080/client/?user=testuser"
echo ""
echo "ðŸ“Š Podczas tworzenia serwera zobaczysz:"
echo "   - ðŸŽ® LiczbÄ™ dostÄ™pnych serwerÃ³w (np. 3/10)"
echo "   - ðŸ’¾ DostÄ™pnÄ… pamiÄ™Ä‡ RAM (np. 4GB/16GB)"
echo "   - ðŸ”Œ Wolne porty i zakres"
echo "   - âœ… WalidacjÄ™ w czasie rzeczywistym"
